<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Log In</title>
    <style>
        body {
            background-color: violet;
            background-image:url(./TUFF.png);
            background-size:cover;
            background-attachment: fixed;
            background-repeat:no-repeat;
            /* The background image does not repeat, covers the full screen and does not move when scrolling. In case the screen is too big for the background image, the background colour is used to fill the missing area. */
        }
        #formulaire {
            text-align: center;
            width: 250px;
            height:250px;
            margin:auto;
            margin-top: 15%;
            border: 2px solid rgb(80, 9, 80);
            background-image:radial-gradient(rgb(245, 150, 245),rgb(192, 71, 192),purple);
            color:white;
            padding: 20px;
            border-radius: 20%;
            font-family: "papyrus";
            /* The box which contains the formula is in the center of the window and changes the text that it contains (papyrus, position, colour). It also has a background colour (gradient) and a border. */
        }
        #title {
            font-size: 30px;
            /* The title for the forms is very big. */
        }
        h1 {
            margin:0px;
            /* The h1 size has a margin already set up depending on the size of the font. By putting the margin to 0, this preexisting margin allows all the text to fit in the form. */
        }
        p {
            margin:0px;
            /* The p size has a margin already set up depending on the size of the font. By putting the margin to 0, this preexisting margin allows all the text to fit in the form. */
        }

        /* HELP FROM : 
        https://stackoverflow.com/questions/26919641/unwanted-top-margin-for-h1-element
        https://www.w3schools.com/css/css3_gradients_radial.asp
        https://www.w3schools.com/howto/howto_css_full_page.asp */
    </style>
</head>

<body>
    <!-- The forms box contains a title, a box to write your username, 2 boxes to write your password, 2 buttons to reveal each password, a button to finish the forms and go to the main page and a note for how long the password should be. -->
    <div id="formulaire"> 
        <h1 id="title"> Log In </h1>
        Username :  <br> 
        <input type = 'text' id = 'username'> <br> 
        Password :
        <br> <input type = 'password' id = 'password' style="margin-left:20px;"> 
        <input type = "checkbox" id = "visibility" onclick="setVisibility()"><br>
        Repeat your password :
        <br> <input type = 'password' id = 'password_again' style="margin-left:20px;"> 
        <input type = "checkbox" id = "visibility" onclick="setVisibilityAgain()"><br> 
        <input type="button" value="Accept" onclick="answers(); return false;">  <br>
        Note : The password must be 8 characters or more.
    </div>
    <!-- There is a plushie when scrolling down on the website. When you click on it, there is a sound effect that plays.-->
    <!-- HELP FROM : https://www.w3schools.com/html/html_images.asp -->
    <div style="height:100px; width:150px; margin:auto; margin-top:5000px; text-align:center; color:aliceblue;">
        <img src = 'chibi.png' alt="chibi koshikage kira" style="height:150px;" onclick="chibiSound()">
        <audio src="firstbomb.mp3" id="explosion"></audio>
        <p style="padding-left:0px;">click me for a surprise</p>
    </div>


    <script>
        // When you click on the plushie. It gets the sound effet from the folder, loads it and plays it.
        // HELP FROM : https://www.reddit.com/r/HTML/comments/1e127x6/how_to_play_an_audio_when_clicking_on_a_link_or/
        function chibiSound() {
            var explosion = document.getElementById('explosion');
            explosion.load();
            explosion.play();
        }
        // There's a button next to the password to reveal the text.
        // HELP FROM : https://www.w3schools.com/html/html_form_input_types.asp
        function setVisibility() {
            var password = document.getElementById("password");
            if (password.type === "password") {
                password.type = "text";
            } else {
                password.type = "password"
            }
        }
        // There's a button next to the password (again) to reveal the text.
        function setVisibilityAgain() {
            var password = document.getElementById("password_again");
            if (password_again.type === "password") {
                password_again.type = "text";
            } else {
                password_again.type = "password"
            }
        }

        // When you click the button, it checks if you respected all the requirements and gives an alert.
        function answers() {
            var username = document.getElementById('username').value;
            var password = document.getElementById('password').value;
            var password_again = document.getElementById('password_again').value;
            localStorage.setItem('username', username);
            console.log(username, password, password_again);
            if (username!=='' && password!== '' && password_again!=='') {
                if (password.length >= 8) {
                    if (password === password_again) {
                        // stores the username in the local storage
                        var lebron = document.getElementById('username').value;
                        localStorage.setItem('myValue', lebron);

                        alert('Hello ' + username + '. Welcome to the site.')
                        window.location.href = 'mainpage.html';
                    } else {
                        alert('Passwords do not match.')
                    }
                } else {
                    alert("Your password must be 8 characters or more.")
                }
            } else {
                alert("Fill out all the areas before continuing.")
            }
        }
    </script>
</body>
</html>